<div class="material-comparison-table">
  <h2 class="table-title">{{ title }}</h2>

  <div class="table-container">
    <mat-table [dataSource]="rows()" class="comparison-table">

      @for (column of columns(); track column.key) {
        <ng-container [matColumnDef]="column.key">

          <!-- Header -->
          <mat-header-cell *matHeaderCellDef class="header-cell">
            {{ column.title }}
          </mat-header-cell>

          <!-- Data Cell -->
          <mat-cell *matCellDef="let row; let i = index"
                    class="data-cell"
                    [ngClass]="{
                      'percentage-cell': getColumnType(column.key) === 'percentage',
                      'highlighted-row': highlightRowIndex === i
                    }">
            {{ row[column.key] }}
          </mat-cell>

        </ng-container>
      }

      <mat-header-row *matHeaderRowDef="displayedColumns()"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns(); let i = index"
               [ngClass]="{ 'highlighted-row': highlightRowIndex === i }">
      </mat-row>

    </mat-table>
  </div>
</div>
